import{_ as y,i as k,c as d,a as e,b as u,n as f,F as l,d as p,t as n,w as m,v as h,e as g,f as v,q as b,g as _,h as B,j as T,k as L,l as w,o as c}from"./index-DZRl8WQZ.js";const I={name:"EventoView",props:["eventoId"],data(){return{evento:null,nome:"",cognome:"",data_di_nascita:"",presenzaConfermata:!1,imgCopertinaURL:"",daysLeftToBook:""}},async mounted(){try{const o=L(v,"eventi",this.eventoId),s=await w(o);if(s.exists()){this.evento=s.data(),this.imgCopertinaURL=this.evento.imgCopertina;const a=new Date(this.evento.data)-new Date;this.daysLeftToBook=Math.ceil(a/(1e3*60*60*24))}}catch(o){console.log(o)}},methods:{invertiData:k,async aggiungiPartecipante(){try{const o=g(v,"eventi",this.eventoId,"partecipanti");let s;console.log("ci sono"),s=(await T(o,{nome:this.nome,cognome:this.cognome,data_di_nascita:this.data_di_nascita,presenzaConfermata:this.presenzaConfermata})).id,this.nome="",this.cognome="",this.data_di_nascita="",this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:s}})}catch(o){console.log(o)}},async recuperaBiglietto(){const o=g(v,"eventi",this.eventoId,"partecipanti"),s=b(o,_("nome","==",this.nome),_("cognome","==",this.cognome),_("data_di_nascita","==",this.data_di_nascita)),a=await B(s);a.empty||(this.partecipanteId=a.id,this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:a.docs[0].id}}))}}},C={class:"page"},D={class:"layout"},V={key:0,class:"event-block"},R={class:"img-wrapper"},E=["src"],P={class:"event-info"},U={class:"event-title"},z={class:"event-date"},q={class:"event-artists"},M={class:"event-description"},N={key:0,class:"expired-banner"},j={class:"form-title"},F={class:"field"},S=["disabled"],x={class:"field"},A=["disabled"],O={class:"field"},G=["disabled"],H=["disabled"],J={class:"note"};function K(o,s,a,Q,t,r){return c(),d("div",C,[e("div",D,[t.evento?(c(),d("section",V,[e("div",R,[e("img",{src:t.imgCopertinaURL,class:"event-img"},null,8,E),e("span",{class:f(["days-left",{expired:t.daysLeftToBook<0,lastday:t.daysLeftToBook===0}])},[t.daysLeftToBook>0?(c(),d(l,{key:0},[p(n(o.$t("in"))+" "+n(t.daysLeftToBook)+" "+n(o.$t("days")),1)],64)):t.daysLeftToBook===0?(c(),d(l,{key:1},[p(n(o.$t("lastDay")),1)],64)):(c(),d(l,{key:2},[p(n(o.$t("eventExpired")),1)],64))],2)]),e("header",P,[e("h1",U,n(t.evento.nome_evento),1),e("p",z,n(r.invertiData(t.evento.data)),1),e("p",q,n(t.evento.artists),1),e("p",M,n(t.evento.description),1)])])):u("",!0),e("section",{class:f(["form",{formExpired:t.daysLeftToBook<0}])},[t.daysLeftToBook<0?(c(),d("div",N,[e("span",null,n(o.$t("eventExpired")),1)])):u("",!0),e("h4",j,n(o.$t("registerParticipantAtEvent")),1),e("div",F,[e("label",null,n(o.$t("name")),1),m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>t.nome=i),type:"text",disabled:t.daysLeftToBook<0},null,8,S),[[h,t.nome]])]),e("div",x,[e("label",null,n(o.$t("surname")),1),m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>t.cognome=i),type:"text",disabled:t.daysLeftToBook<0},null,8,A),[[h,t.cognome]])]),e("div",O,[e("label",null,n(o.$t("dateOfBirth")),1),m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=i=>t.data_di_nascita=i),type:"date",disabled:t.daysLeftToBook<0},null,8,G),[[h,t.data_di_nascita]])]),e("button",{type:"button",onClick:s[3]||(s[3]=(...i)=>r.aggiungiPartecipante&&r.aggiungiPartecipante(...i)),class:"btn primary",disabled:t.daysLeftToBook<0},n(o.$t("joinButton")),9,H),e("button",{type:"button",onClick:s[4]||(s[4]=(...i)=>r.recuperaBiglietto&&r.recuperaBiglietto(...i)),class:"btn outline"},n(o.$t("recoverTicketButton")),1),e("p",J,n(o.$t("recoverTicketMessage")),1)],2)])])}const X=y(I,[["render",K],["__scopeId","data-v-bb94ee39"]]);export{X as default};
