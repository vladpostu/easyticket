(function(){"use strict";var e={5697:function(e,a,t){t.d(a,{I:function(){return d},db:function(){return l},j:function(){return u}});var n=t(7617),o=t(6400),r=t(7844),i=t(9915);const s={apiKey:"AIzaSyAYzU05BOCyEZwn5jdBEkNHRJ0VFtSL8i0",authDomain:"easyticket-65a56.firebaseapp.com",projectId:"easyticket-65a56",storageBucket:"easyticket-65a56.firebasestorage.app",messagingSenderId:"1089510162656",appId:"1:1089510162656:web:919825ad8d992826d8d085",measurementId:"G-3YM37HZJ5E"},c=(0,o.Wp)(s),l=(0,n.aU)(c),d=(0,r.c7)(),u=(0,i.xI)(c)},8020:function(e,a,t){function n(e){if(!e)return e;const a=e.split("-"),[t,n,o]=a;return`${o}/${n}/${t}`}t.d(a,{E:function(){return n}})},9855:function(e,a,t){var n=t(5130),o=t(6768);const r={class:"header"},i={class:"header-box"};function s(e,a,t,n,s,c){const l=(0,o.g2)("router-link"),d=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",r,[(0,o.Lk)("div",i,[(0,o.bF)(l,{style:{"text-decoration":"none"},to:{name:"HomeView"},class:"logo"},{default:(0,o.k6)(()=>[...a[0]||(a[0]=[(0,o.eW)("EasyTicket",-1)])]),_:1}),(0,o.bF)(l,{to:"/area-riservata",class:"area-riservata"},{default:(0,o.k6)(()=>[...a[1]||(a[1]=[(0,o.Lk)("div",null,"AREA RISERVATA",-1)])]),_:1})])]),(0,o.bF)(d)],64)}var c={name:"App",components:{}},l=t(1241);const d=(0,l.A)(c,[["render",s],["__scopeId","data-v-1fe5d27e"]]);var u=d,v=t(8512);function p(e,a,t,n,r,i){const s=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)(o.FK,null,[a[1]||(a[1]=(0,o.Lk)("h1",null,"index",-1)),(0,o.bF)(s,{to:"/home"},{default:(0,o.k6)(()=>[...a[0]||(a[0]=[(0,o.eW)("home",-1)])]),_:1})],64)}var m={name:"IndexView",beforeRouteEnter(e,a,t){t({name:"HomeView"})}};const g=(0,l.A)(m,[["render",p]]);var h=g,f=t(4232),k=t.p+"img/crowd-1056764_1280.46c465b3.jpg";function z(e,a,t,n,r,i){const s=(0,o.g2)("EventiView");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("h1",null,(0,f.v_)(e.$t("welcome")),1),a[0]||(a[0]=(0,o.Lk)("div",{class:"image-container"},[(0,o.Lk)("img",{src:k,class:"img-fluid",alt:""}),(0,o.Lk)("div",{class:"moto"},"Scopri gli eventi dedicati a te")],-1)),(0,o.bF)(s,{organizzatoreId:r.organizzatoreId},null,8,["organizzatoreId"])],64)}t(8111),t(1701);var L=t(7617),b=t(5697);const w={class:"eventi"},y=["src"],E={class:"card-body"},C={class:"card-title"};function _(e,a,t,n,r,i){const s=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",w,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.eventi,e=>((0,o.uX)(),(0,o.Wv)(s,{to:i.getLinkView(e),key:e.id,class:"card",style:{width:"18rem"}},{default:(0,o.k6)(()=>[(0,o.Lk)("img",{src:e.imgCopertina,class:"card-img-top",alt:""},null,8,y),(0,o.Lk)("div",E,[(0,o.Lk)("h5",C,(0,f.v_)(e.nome_evento),1),(0,o.Lk)("p",null,(0,f.v_)(i.invertiData(e.data)),1),a[0]||(a[0]=(0,o.Lk)("p",{class:"card-text"},"Some quick example text to build on the card title and make up the bulk of the card’s content.",-1))])]),_:2},1032,["to"]))),128))])}var I=t(8020),A={name:"EventiView",data(){return{eventi:[]}},props:["organizzatoreId"],methods:{invertiData:I.E,async fetchEventi(){if(this.organizzatoreId){const e=(0,L.P)((0,L.rJ)(b.db,"eventi"),(0,L._M)("idOrganizzatore","==",this.organizzatoreId)),a=await(0,L.GG)(e);this.eventi=a.docs.map(e=>({id:e.id,...e.data()}))}else{const e=(0,L.rJ)(b.db,"eventi"),a=await(0,L.GG)(e);this.eventi=a.docs.map(e=>({id:e.id,...e.data()}))}},getLinkView(e){return this.organizzatoreId?{name:"EventoOrganizzatore",params:{eventoId:e.id}}:{name:"EventoView",params:{eventoId:e.id}}}},mounted(){this.fetchEventi()}};const O=(0,l.A)(A,[["render",_],["__scopeId","data-v-3ce6ec49"]]);var P=O,F={name:"HomePage",components:{EventiView:P},data(){return{eventi:[],organizzatoreId:""}},methods:{async aggiornaLista(){const e=(0,L.P)((0,L.rJ)(b.db,"eventi")),a=await(0,L.GG)(e);this.eventi=a.docs.map(e=>({id:e.id,...e.data()}))}},async mounted(){await this.aggiornaLista()}};const S=(0,l.A)(F,[["render",z],["__scopeId","data-v-0ed47941"]]);var x=S;function X(e,a,t,n,r,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[a[0]||(a[0]=(0,o.Lk)("h1",null,"page 2",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.eventi,e=>((0,o.uX)(),(0,o.CE)("li",{key:e.nome},(0,f.v_)(e.nome),1))),128))])],64)}var V={name:"SecondPage",data(){return{eventi:[]}},async mounted(){const e=await(0,L.GG)((0,L.rJ)(b.db,"test"));this.eventi=e.docs.map(e=>e.data())}};const R=(0,l.A)(V,[["render",X],["__scopeId","data-v-677c1d45"]]);var j=R;const J={class:"wrapper"},W={class:"opzioni"},N={class:"card"},U={class:"card-body"},D={class:"card"},G={class:"card-body"};function T(e,a,t,n,r,i){const s=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",J,[a[6]||(a[6]=(0,o.Lk)("h2",{class:"mt-5"},"Area riservata",-1)),(0,o.Lk)("div",W,[(0,o.Lk)("div",N,[(0,o.Lk)("div",U,[a[1]||(a[1]=(0,o.Lk)("h5",{class:"card-title"},"Organizzatore",-1)),a[2]||(a[2]=(0,o.Lk)("p",{class:"card-text"},"Crea, gestisci e verifica i tuoi eventi",-1)),(0,o.bF)(s,{to:{name:"AreaOrganizzatore"},class:"btn btn-primary"},{default:(0,o.k6)(()=>[...a[0]||(a[0]=[(0,o.eW)("Accedi",-1)])]),_:1})])]),(0,o.Lk)("div",D,[(0,o.Lk)("div",G,[a[4]||(a[4]=(0,o.Lk)("h5",{class:"card-title"},"Convalidatore",-1)),a[5]||(a[5]=(0,o.Lk)("p",{class:"card-text"},"Verifica e convalida la presenza dei partecipanti",-1)),(0,o.bF)(s,{to:{name:"AreaConvalidatore"},class:"btn btn-primary"},{default:(0,o.k6)(()=>[...a[3]||(a[3]=[(0,o.eW)("Accedi",-1)])]),_:1})])])])])}var H={name:"AreaRiservata",mounted(){}};const Q=(0,l.A)(H,[["render",T],["__scopeId","data-v-d591c90a"]]);var $=Q;const M={class:"area-organizzatore"},q={class:"header"},K={class:"intestazione"},B={class:"contenuto"},Z={class:"eventi-org"};function Y(e,a,t,n,r,i){const s=(0,o.g2)("router-link"),c=(0,o.g2)("EventiView");return(0,o.uX)(),(0,o.CE)("div",M,[(0,o.Lk)("header",q,[(0,o.Lk)("div",K,[a[2]||(a[2]=(0,o.Lk)("h2",null,"Area Organizzatore",-1)),(0,o.Lk)("h5",null,[a[1]||(a[1]=(0,o.Lk)("span",{class:"light"},"Ciao,",-1)),(0,o.eW)(" "+(0,f.v_)(r.currentUser.email),1)])]),(0,o.Lk)("button",{class:"logout-button",onClick:a[0]||(a[0]=(...e)=>i.logout&&i.logout(...e))},"Esci")]),(0,o.Lk)("main",B,[(0,o.bF)(s,{class:"btn btn-primary",to:"/area-riservata/area-organizzatore/aggiungi-evento"},{default:(0,o.k6)(()=>[...a[3]||(a[3]=[(0,o.eW)(" + Aggiungi un nuovo evento ",-1)])]),_:1}),(0,o.Lk)("section",Z,[a[4]||(a[4]=(0,o.Lk)("h6",{class:"fw-bold"},"I tuoi eventi",-1)),(0,o.bF)(c,{class:"eventi-comp",organizzatoreId:r.organizzatoreIdRecuperato},null,8,["organizzatoreId"])])])])}t(4114);var ee=t(9915),ae={name:"AreaOrganizzatore",beforeMount(){},mounted(){console.log("org id "+localStorage.getItem("organizzatoreId"))},data(){return{organizzatoreIdRecuperato:localStorage.getItem("organizzatoreId"),currentUser:b.j.currentUser}},components:{EventiView:P},methods:{async logout(){try{await(0,ee.CI)(b.j),this.$router.push({name:"AreaRiservata"})}catch(e){console.log(e)}}}};const te=(0,l.A)(ae,[["render",Y],["__scopeId","data-v-3b8f9ca0"]]);var ne=te;const oe={class:"evento-nome"},re={class:"evento-nome"};function ie(e,a,t,n,r,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[a[0]||(a[0]=(0,o.Lk)("h2",null,"Eventi Organizzatore",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.eventi,e=>((0,o.uX)(),(0,o.CE)("div",{class:"evento",key:e.id},[(0,o.Lk)("div",oe,(0,f.v_)(e.nome_evento),1),(0,o.Lk)("div",re,(0,f.v_)(i.invertiData(e.data)),1)]))),128))],64)}var se={name:"EventiOrganizzatore",data(){return{eventi:[]}},methods:{invertiData:I.E,async caricaEventi(){const e=(0,L.P)((0,L.rJ)(b.db,"eventi"),(0,L._M)("emailOrganizzatore","==",localStorage.getItem("organizzatoreEmail"))),a=await(0,L.GG)(e);this.eventi=a.docs.map(e=>({id:e.id,...e.data()}))}},async mounted(){await this.caricaEventi()}};const ce=(0,l.A)(se,[["render",ie]]);var le=ce;const de={class:"area-organizzatore"},ue={class:"form-container"},ve={class:"form-group"},pe={class:"form-group"},me={class:"registrati-link"};function ge(e,a,t,r,i,s){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",de,[a[7]||(a[7]=(0,o.Lk)("header",null,[(0,o.Lk)("h2",null,"Accesso Organizzatore"),(0,o.Lk)("p",{class:"subtitle"},"Accedi per gestire i tuoi eventi")],-1)),(0,o.Lk)("div",ue,[(0,o.Lk)("div",ve,[a[3]||(a[3]=(0,o.Lk)("label",{for:"email_organizzatore"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.email=e),type:"email",id:"email_organizzatore",placeholder:""},null,512),[[n.Jo,i.email]])]),(0,o.Lk)("div",pe,[a[4]||(a[4]=(0,o.Lk)("label",{for:"password_organizzatore"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.password=e),type:"password",id:"password_organizzatore",placeholder:""},null,512),[[n.Jo,i.password]])]),(0,o.Lk)("button",{class:"btn-primary",onClick:a[2]||(a[2]=(...e)=>s.login&&s.login(...e))},"Accedi"),(0,o.Lk)("div",me,[a[6]||(a[6]=(0,o.eW)(" Non hai un account? ",-1)),(0,o.bF)(c,{to:"/area-riservata/organizzatore-registrati"},{default:(0,o.k6)(()=>[...a[5]||(a[5]=[(0,o.eW)("Registrati",-1)])]),_:1})])])])}var he={name:"OrganizzatoreLogin",data(){return{email:"",password:""}},methods:{async login(){try{const e=await(0,ee.x9)(b.j,this.email,this.password),a=await(0,L.x7)((0,L.H9)(b.db,"organizzatori",e.user.uid));console.log(a),localStorage.setItem("organizzatoreId",e.user.uid),this.$router.push({name:"AreaOrganizzatore"})}catch(e){console.log(e)}}},mounted(){}};const fe=(0,l.A)(he,[["render",ge],["__scopeId","data-v-8cd86fee"]]);var ke=fe;const ze={class:"area-organizzatore"},Le={class:"form-container"},be={class:"form-group"},we={class:"form-group"},ye={class:"registrati-link"};function Ee(e,a,t,r,i,s){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ze,[a[7]||(a[7]=(0,o.Lk)("header",null,[(0,o.Lk)("h2",null,"Registrati"),(0,o.Lk)("p",{class:"subtitle"},"Crea il tuo account organizzatore")],-1)),(0,o.Lk)("div",Le,[(0,o.Lk)("div",be,[a[3]||(a[3]=(0,o.Lk)("label",{for:"email_organizzatore"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.email=e),type:"email",id:"email_organizzatore",placeholder:"Inserisci la tua email"},null,512),[[n.Jo,i.email]])]),(0,o.Lk)("div",we,[a[4]||(a[4]=(0,o.Lk)("label",{for:"password_organizzatore"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.password=e),type:"password",id:"password_organizzatore",placeholder:"Inserisci la tua password"},null,512),[[n.Jo,i.password]])]),(0,o.Lk)("button",{class:"btn-primary",onClick:a[2]||(a[2]=(...e)=>s.addOrganizzatore&&s.addOrganizzatore(...e))},"Crea Account"),(0,o.Lk)("div",ye,[a[6]||(a[6]=(0,o.eW)(" Hai già un account? ",-1)),(0,o.bF)(c,{to:"/area-riservata/organizzatore-login"},{default:(0,o.k6)(()=>[...a[5]||(a[5]=[(0,o.eW)("Accedi",-1)])]),_:1})])])])}var Ce={name:"OrganizzatoreRegistrati",data(){return{email:"",password:""}},methods:{async addOrganizzatore(){try{const e=await(0,ee.eJ)(b.j,this.email,this.password);await(0,L.BN)((0,L.H9)(b.db,"organizzatori",e.user.uid),{email:this.email,createdAt:new Date}),this.$router.push("/area-riservata/area-organizzatore")}catch(e){console.error(e)}this.email="",this.password=""}}};const _e=(0,l.A)(Ce,[["render",Ee],["__scopeId","data-v-ddb8ea7a"]]);var Ie=_e;function Ae(e,a,t,n,r,i){const s=(0,o.g2)("AddEvento");return(0,o.uX)(),(0,o.Wv)(s,{onEventoInserito:i.goToEventiOrganizzatore},null,8,["onEventoInserito"])}const Oe={class:"area-add-evento"},Pe={class:"form-container"},Fe={class:"form-group"},Se={class:"form-group"},xe={class:"form-group"},Xe={class:"form-group upload"},Ve={key:0,class:"alert-success"};function Re(e,a,t,r,i,s){return(0,o.uX)(),(0,o.CE)("div",Oe,[a[13]||(a[13]=(0,o.Lk)("header",null,[(0,o.Lk)("h2",null,"Aggiungi Evento"),(0,o.Lk)("p",{class:"subtitle"},"Compila i dati per creare un nuovo evento")],-1)),(0,o.Lk)("div",Pe,[(0,o.Lk)("div",Fe,[a[5]||(a[5]=(0,o.Lk)("label",{for:"nome_evento"},"Nome Evento",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.nome_evento=e),type:"text",id:"nome_evento",placeholder:"Es. Summer Fest 2025"},null,512),[[n.Jo,i.nome_evento]])]),(0,o.Lk)("div",Se,[a[6]||(a[6]=(0,o.Lk)("label",{for:"data_evento"},"Data Evento",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.data=e),type:"date",id:"data_evento"},null,512),[[n.Jo,i.data]])]),(0,o.Lk)("div",xe,[a[7]||(a[7]=(0,o.Lk)("label",{for:"password_convalidatori"},"Password Convalidatori",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.passwordConvalidatori=e),type:"text",id:"password_convalidatori",placeholder:"Password per i convalidatori"},null,512),[[n.Jo,i.passwordConvalidatori]]),a[8]||(a[8]=(0,o.Lk)("small",{class:"form-text"},"Fornisci questa password ai tuoi convalidatori per l’accesso.",-1))]),(0,o.Lk)("div",Xe,[a[9]||(a[9]=(0,o.Lk)("label",{for:"inputGroupFile01"},"Immagine di copertina",-1)),(0,o.Lk)("input",{type:"file",id:"inputGroupFile01",onChange:a[3]||(a[3]=(...e)=>s.onFileChange&&s.onFileChange(...e)),class:"form-control"},null,32)]),i.aliasEvento?((0,o.uX)(),(0,o.CE)("div",Ve,[a[12]||(a[12]=(0,o.Lk)("p",null,"Evento inserito correttamente!",-1)),(0,o.Lk)("p",null,[a[10]||(a[10]=(0,o.Lk)("strong",null,"Alias generato:",-1)),a[11]||(a[11]=(0,o.eW)()),(0,o.Lk)("span",null,(0,f.v_)(i.aliasEvento),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn-primary btn-center",onClick:a[4]||(a[4]=(...e)=>s.inserisciEvento&&s.inserisciEvento(...e))},"Inserisci Evento")])])}var je=t(7844),Je={name:"AddEvento",data(){return{nome_evento:"",data:"",emailOrganizzatore:"",idOrganizzatore:"",aliasEvento:"",passwordConvalidatori:"",imgCopertina:null}},methods:{async inserisciEvento(){this.emailOrganizzatore=localStorage.getItem("organizzatoreEmail"),this.idOrganizzatore=localStorage.getItem("organizzatoreId");let e="";if(this.imgCopertina){const a=(0,je.KR)(b.I,`copertine/${this.imgCopertina.name}`);await(0,je.D)(a,this.imgCopertina),e=await(0,je.qk)(a)}const a={nome_evento:this.nome_evento,data:this.data,emailOrganizzatore:this.emailOrganizzatore,idOrganizzatore:this.idOrganizzatore,aliasEvento:this.nome_evento.slice(0,3)+this.data,passwordConvalidatori:this.passwordConvalidatori,imgCopertina:e};try{await(0,L.gS)((0,L.rJ)(b.db,"eventi"),a),this.aliasEvento=a.aliasEvento,this.data="",this.nome_evento="",this.$emit("eventoInserito")}catch(t){console.log(t)}},onFileChange(e){this.imgCopertina=e.target.files[0]}}};const We=(0,l.A)(Je,[["render",Re],["__scopeId","data-v-3be218fc"]]);var Ne=We,Ue={name:"AggiungiEvento",data(){return{}},components:{AddEvento:Ne},methods:{goToEventiOrganizzatore(){}}};const De=(0,l.A)(Ue,[["render",Ae]]);var Ge=De;const Te={class:"area-convalidatore"},He={key:0,class:"subtitle"},Qe={key:0,class:"form-container"},$e={class:"form-group"},Me={class:"form-group"},qe={key:1,class:"scanner-section"},Ke={key:0,class:"partecipante"},Be={class:"info"},Ze={class:"conferma"},Ye={key:0,class:"alert alert-warning"},ea={key:1};function aa(e,a,t,r,i,s){const c=(0,o.g2)("ApriFotocamera");return(0,o.uX)(),(0,o.CE)("div",Te,[(0,o.Lk)("header",null,[a[4]||(a[4]=(0,o.Lk)("h2",null,"Area Convalidatore",-1)),i.isLogged?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("p",He,"Accedi per convalidare i partecipanti all’evento"))]),i.isLogged?((0,o.uX)(),(0,o.CE)("div",qe,[(0,o.bF)(c,{onEmitQRCode:s.gestisciQR},null,8,["onEmitQRCode"]),i.idPartecipante?((0,o.uX)(),(0,o.CE)("div",Ke,[a[12]||(a[12]=(0,o.Lk)("h4",null,"Dettagli Partecipante",-1)),(0,o.Lk)("div",Be,[(0,o.Lk)("div",null,[a[8]||(a[8]=(0,o.Lk)("strong",null,"Nome:",-1)),(0,o.eW)(" "+(0,f.v_)(i.datiPartecipante.nome),1)]),(0,o.Lk)("div",null,[a[9]||(a[9]=(0,o.Lk)("strong",null,"Cognome:",-1)),(0,o.eW)(" "+(0,f.v_)(i.datiPartecipante.cognome),1)]),(0,o.Lk)("div",null,[a[10]||(a[10]=(0,o.Lk)("strong",null,"Data di nascita:",-1)),(0,o.eW)(" "+(0,f.v_)(i.datiPartecipante.dataNascita),1)])]),(0,o.Lk)("div",Ze,[i.datiPartecipante.presenzaConfermata?((0,o.uX)(),(0,o.CE)("div",Ye," Presenza già confermata ")):((0,o.uX)(),(0,o.CE)("div",ea,[a[11]||(a[11]=(0,o.Lk)("p",null,"I dati sono corretti?",-1)),(0,o.Lk)("button",{class:"btn-confirm",onClick:a[3]||(a[3]=(...e)=>s.confermaPartecipazione&&s.confermaPartecipazione(...e))},"Conferma Presenza")]))])])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",Qe,[(0,o.Lk)("div",$e,[a[5]||(a[5]=(0,o.Lk)("label",{for:"alias_evento"},"Alias Evento",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.evento=e),type:"text",id:"alias_evento",placeholder:""},null,512),[[n.Jo,i.evento]])]),(0,o.Lk)("div",Me,[a[6]||(a[6]=(0,o.Lk)("label",{for:"password_evento"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.password=e),type:"password",id:"password_evento",placeholder:""},null,512),[[n.Jo,i.password]])]),a[7]||(a[7]=(0,o.Lk)("small",{class:"form-text"},"Le credenziali vengono fornite dall'organizzatore.",-1)),(0,o.Lk)("button",{class:"btn-primary",onClick:a[2]||(a[2]=(...e)=>s.convalidatoreLogin&&s.convalidatoreLogin(...e))},"Accedi")]))])}const ta={class:"scanner-container"},na=["disabled"],oa={key:0,class:"video-wrapper"},ra={ref:"video",autoplay:"",playsinline:""},ia={ref:"canvas",class:"hidden-canvas"},sa={key:1,class:"qr-result"},ca={class:"code"};function la(e,a,t,n,r,i){return(0,o.uX)(),(0,o.CE)("div",ta,[(0,o.Lk)("button",{class:"btn-scan",onClick:a[0]||(a[0]=(...e)=>i.apriFotocamera&&i.apriFotocamera(...e)),disabled:r.scanning},(0,f.v_)(r.scanning?"Scansione in corso...":"Scannerizza QR Code"),9,na),r.scanning?((0,o.uX)(),(0,o.CE)("div",oa,[(0,o.Lk)("video",ra,null,512),a[1]||(a[1]=(0,o.Lk)("div",{class:"scan-overlay"},null,-1))])):(0,o.Q3)("",!0),(0,o.Lk)("canvas",ia,null,512),r.qrContent?((0,o.uX)(),(0,o.CE)("div",sa,[a[2]||(a[2]=(0,o.Lk)("p",null,"QR Rilevato:",-1)),(0,o.Lk)("div",ca,(0,f.v_)(r.qrContent),1)])):(0,o.Q3)("",!0)])}t(7588);var da=t(8703),ua=t.n(da),va={name:"ApriFotocamera",data(){return{stream:null,qrContent:"",scanning:!1}},emits:["emitQRCode"],async mounted(){},methods:{async apriFotocamera(){try{this.scanning=!0,this.$nextTick(()=>{this.scanQR()}),this.stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),this.$refs.video.srcObject=this.stream}catch(e){console.error(e)}},async scanQR(){const e=this.$refs.video,a=this.$refs.canvas,t=a.getContext("2d"),n=()=>{if(this.scanning){if(e.readyState===e.HAVE_ENOUGH_DATA){a.width=e.videoWidth,a.height=e.videoHeight,t.drawImage(e,0,0,a.width,a.height);const n=t.getImageData(0,0,a.width,a.height),o=ua()(n.data,n.width,n.height);o&&(this.$emit("emitQRCode",o.data),this.scanning=!1,this.stopCamera())}requestAnimationFrame(n)}};n()},stopCamera(){this.stream&&this.stream.getTracks().forEach(e=>e.stop())}},beforeUnmount(){this.stopCamera()}};const pa=(0,l.A)(va,[["render",la],["__scopeId","data-v-45bab6c9"]]);var ma=pa,ga={name:"AreaConvalidatore",data(){return{isLogged:null,evento:"",password:"",eventoId:"",idPartecipante:"",datiPartecipante:{nome:"",cognome:"",dataNascita:"",presenzaConfermata:null}}},components:{ApriFotocamera:ma},beforeMount(){this.isLogged=!1},methods:{async convalidatoreLogin(){const e=(0,L.P)((0,L.rJ)(b.db,"eventi"),(0,L._M)("aliasEvento","==",this.evento),(0,L._M)("passwordConvalidatori","==",this.password)),a=await(0,L.GG)(e);a.empty?alert("credenziali errate"):(this.eventoId=a.docs[0].id,localStorage.setItem("convalidatoreEvento",this.evento),localStorage.setItem("convalidatorePassword",this.password),localStorage.setItem("convalidatoreLogged","true"),this.isLogged=!0)},gestisciQR(e){this.idPartecipante=e,this.recuperaDatiPartecipante()},async recuperaDatiPartecipante(){try{const e=(0,L.H9)(b.db,"eventi",this.eventoId,"partecipanti",this.idPartecipante),a=await(0,L.x7)(e);if(a.exists()){const e=a.data();this.datiPartecipante={nome:e.nome,cognome:e.cognome,dataNascita:e.data_di_nascita,presenzaConfermata:e.presenzaConfermata}}}catch(e){console.log(e)}},async confermaPartecipazione(){const e=(0,L.H9)(b.db,"eventi",this.eventoId,"partecipanti",this.idPartecipante);try{await(0,L.mZ)(e,{presenzaConfermata:!0}),this.datiPartecipante.presenzaConfermata=!0}catch(a){console.log(a)}}}};const ha=(0,l.A)(ga,[["render",aa],["__scopeId","data-v-346e5d48"]]);var fa=ha;const ka=[{path:"/",name:"IndexView",component:h},{path:"/home",name:"HomeView",component:x},{path:"/secondpage",name:"SecondPage",component:j},{path:"/evento/:eventoId",name:"EventoView",component:()=>t.e(551).then(t.bind(t,4551)),props:!0},{path:"/evento/:eventoId/:partecipanteId",name:"PartecipanteView",component:()=>t.e(778).then(t.bind(t,8778)),props:!0},{path:"/area-riservata",name:"AreaRiservata",component:$},{path:"/area-riservata/area-organizzatore",name:"AreaOrganizzatore",component:ne,meta:{requiresAuth:!0}},{path:"/area-riservata/area-organizzatore/eventi-organizzatore",name:"EventiOrganizzatore",component:le},{path:"/area-riservata/organizzatore-login",name:"OrganizzatoreLogin",component:ke},{path:"/area-riservata/organizzatore-registrati",name:"OrganizzatoreRegistrati",component:Ie},{path:"/area-riservata/area-organizzatore/aggiungi-evento",name:"AggiungiEvento",component:Ge},{path:"/area-riservata/area-convalidatore",name:"AreaConvalidatore",component:fa},{path:"/area-riservata/area-organizzatore/evento/:eventoId",name:"EventoOrganizzatore",component:()=>t.e(190).then(t.bind(t,9190)),props:!0}],za=(0,v.aE)({history:(0,v.Bt)("/easyticket/"),routes:ka});function La(){return new Promise((e,a)=>{const t=(0,ee.hg)((0,ee.xI)(),a=>{t(),e(a)},a)})}za.beforeEach(async(e,a,t)=>{const n=await La();e.path.startsWith("/area-riservata/area-organizzatore")&&!n?t("/area-riservata/organizzatore-login"):e.path.startsWith("/area-riservata/organizzatore-login")&&n?t("/home"):t()});var ba=za,wa=t(8888),ya=(t(8077),JSON.parse('{"welcome":"Welcome"}')),Ea=JSON.parse('{"welcome":"Benvenuto"}');const Ca=(0,wa.hU)({legacy:!1,locale:"it",fallbackLocale:"en",messages:{it:Ea,en:ya}}),_a=(0,n.Ef)(u);_a.use(ba),_a.use(Ca),_a.mount("#app")}},a={};function t(n){var o=a[n];if(void 0!==o)return o.exports;var r=a[n]={exports:{}};return e[n].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,n,o,r){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],r=e[d][2];for(var s=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(t.O).every(function(e){return t.O[e](n[c])})?n.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(d--,1);var l=o();void 0!==l&&(a=l)}}return a}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,o,r]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce(function(a,n){return t.f[n](e,a),a},[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{190:"ea598976",551:"02991fde",778:"5fa30ac4"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+"."+{190:"2d5869d2",551:"693178df",778:"fe4e4349"}[e]+".css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="easyticket:";t.l=function(n,o,r,i){if(e[n])e[n].push(o);else{var s,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==a+r){s=u;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",a+r),s.src=n),e[n]=[o];var v=function(a,t){s.onerror=s.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach(function(e){return e(t)}),a)return a(t)},p=setTimeout(v.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=v.bind(null,s.onerror),s.onload=v.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/easyticket/"}(),function(){if("undefined"!==typeof document){var e=function(e,a,n,o,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",t.nc&&(i.nonce=t.nc);var s=function(t){if(i.onerror=i.onload=null,"load"===t.type)o();else{var n=t&&t.type,s=t&&t.target&&t.target.href||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+s+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=n,c.request=s,i.parentNode&&i.parentNode.removeChild(i),r(c)}};return i.onerror=i.onload=s,i.href=a,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},a=function(e,a){for(var t=document.getElementsByTagName("link"),n=0;n<t.length;n++){var o=t[n],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===a))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){o=i[n],r=o.getAttribute("data-href");if(r===e||r===a)return o}},n=function(n){return new Promise(function(o,r){var i=t.miniCssF(n),s=t.p+i;if(a(i,s))return o();e(n,s,null,o,r)})},o={524:0};t.f.miniCss=function(e,a){var t={190:1,551:1,778:1};o[e]?a.push(o[e]):0!==o[e]&&t[e]&&a.push(o[e]=n(e).then(function(){o[e]=0},function(a){throw delete o[e],a}))}}}(),function(){var e={524:0};t.f.j=function(a,n){var o=t.o(e,a)?e[a]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(function(t,n){o=e[a]=[t,n]});n.push(o[2]=r);var i=t.p+t.u(a),s=new Error,c=function(n){if(t.o(e,a)&&(o=e[a],0!==o&&(e[a]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+a+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,o[1](s)}};t.l(i,c,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,n){var o,r,i=n[0],s=n[1],c=n[2],l=0;if(i.some(function(a){return 0!==e[a]})){for(o in s)t.o(s,o)&&(t.m[o]=s[o]);if(c)var d=c(t)}for(a&&a(n);l<i.length;l++)r=i[l],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(d)},n=self["webpackChunkeasyticket"]=self["webpackChunkeasyticket"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],function(){return t(9855)});n=t.O(n)})();
//# sourceMappingURL=app.d7bf11d1.js.map