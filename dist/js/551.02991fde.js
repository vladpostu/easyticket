"use strict";(self["webpackChunkeasyticket"]=self["webpackChunkeasyticket"]||[]).push([[551],{4551:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var n=a(6768),i=a(4232),o=a(5130);const s={class:"background"},c={class:"wrapper"},r={key:0,class:"evento-dettagli-wrapper mt-5"},l=["src"],p={class:"mt-3"},d={class:"partecipante-form"},m={class:"mb-3"},u={class:"mb-3"},g={class:"mb-3"};function v(t,e,a,v,h,_){return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",c,[h.evento?((0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("img",{src:h.imgCopertinaURL,alt:""},null,8,l),(0,n.Lk)("div",null,[(0,n.Lk)("h1",p,(0,i.v_)(h.evento.nome_evento),1),(0,n.Lk)("h5",null,(0,i.v_)(_.invertiData(h.evento.data)),1)])])):(0,n.Q3)("",!0),(0,n.Lk)("form",d,[e[8]||(e[8]=(0,n.Lk)("h4",{class:"mb-4"},"Registrati all'evento",-1)),(0,n.Lk)("div",m,[e[5]||(e[5]=(0,n.Lk)("label",{for:"nome_partecipante",class:"form-label"},"Nome",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>h.nome=t),type:"text",placeholder:"",class:"form-control",id:"nome_partecipante"},null,512),[[o.Jo,h.nome]])]),(0,n.Lk)("div",u,[e[6]||(e[6]=(0,n.Lk)("label",{for:"cognome_partecipante",class:"form-label"},"Cognome",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>h.cognome=t),type:"text",placeholder:"",class:"form-control"},null,512),[[o.Jo,h.cognome]])]),(0,n.Lk)("div",g,[e[7]||(e[7]=(0,n.Lk)("label",{for:"data_nascita_partecipante",class:"form-label"},"Data di nascita ",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>h.data_di_nascita=t),type:"date",placeholder:"",id:"data_nascita_partecipante",class:"form-control"},null,512),[[o.Jo,h.data_di_nascita]])]),(0,n.Lk)("button",{type:"button",onClick:e[3]||(e[3]=(...t)=>_.aggiungiPartecipante&&_.aggiungiPartecipante(...t)),class:"btn btn-primary mt-4"},"Partecipa"),(0,n.Lk)("button",{type:"button",onClick:e[4]||(e[4]=(...t)=>_.recuperaBiglietto&&_.recuperaBiglietto(...t)),class:"btn btn-outline-light mt-3 btn-sm"},"Recupera biglietto"),e[9]||(e[9]=(0,n.Lk)("div",{class:"form-text",style:{width:"200px"}},'Se vuoi recuperare il tuo biglietto compila i campi e premi il pulsante "Recupera Biglietto" ',-1))])])])}a(4114);var h=a(7617),_=a(5697),b=a(8020),k={name:"EventoView",props:["eventoId"],data(){return{evento:null,nome:"",cognome:"",data_di_nascita:"",presenzaConfermata:!1,imgCopertinaURL:""}},async mounted(){try{const t=(0,h.H9)(_.db,"eventi",this.eventoId),e=await(0,h.x7)(t);e.exists()&&(this.evento=e.data(),this.imgCopertinaURL=this.evento.imgCopertina)}catch(t){console.log(t)}},methods:{invertiData:b.E,async aggiungiPartecipante(){try{const t=(0,h.rJ)(_.db,"eventi",this.eventoId,"partecipanti");let e;console.log("ci sono");const a=await(0,h.gS)(t,{nome:this.nome,cognome:this.cognome,data_di_nascita:this.data_di_nascita,presenzaConfermata:this.presenzaConfermata});e=a.id,this.nome="",this.cognome="",this.data_di_nascita="",this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:e}})}catch(t){console.log(t)}},async recuperaBiglietto(){const t=(0,h.rJ)(_.db,"eventi",this.eventoId,"partecipanti"),e=(0,h.P)(t,(0,h._M)("nome","==",this.nome),(0,h._M)("cognome","==",this.cognome),(0,h._M)("data_di_nascita","==",this.data_di_nascita)),a=await(0,h.GG)(e);a.empty||(this.partecipanteId=a.id,this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:a.docs[0].id}}))}}},f=a(1241);const L=(0,f.A)(k,[["render",v],["__scopeId","data-v-8522f800"]]);var y=L}}]);
//# sourceMappingURL=551.02991fde.js.map