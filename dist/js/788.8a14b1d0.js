"use strict";(self["webpackChunkeasyticket"]=self["webpackChunkeasyticket"]||[]).push([[788],{1788:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var o=a(6768),n=a(4232),i=a(5130);const s={class:"page"},d={class:"layout"},c={key:0,class:"event-block"},l={class:"img-wrapper"},r=["src"],p={class:"event-info"},v={class:"event-title"},k={class:"event-date"},u={class:"event-artists"},m={class:"event-description"},L={key:0,class:"expired-banner"},_={class:"form-title"},y={class:"field"},h=["disabled"],g={class:"field"},f=["disabled"],b={class:"field"},B=["disabled"],C=["disabled"],T={class:"note"};function $(e,t,a,$,E,I){return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",d,[E.evento?((0,o.uX)(),(0,o.CE)("section",c,[(0,o.Lk)("div",l,[(0,o.Lk)("img",{src:E.imgCopertinaURL,class:"event-img"},null,8,r),(0,o.Lk)("span",{class:(0,n.C4)(["days-left",{expired:E.daysLeftToBook<0,lastday:0===E.daysLeftToBook}])},[E.daysLeftToBook>0?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,n.v_)(e.$t("in"))+" "+(0,n.v_)(E.daysLeftToBook)+" "+(0,n.v_)(e.$t("days")),1)],64)):0===E.daysLeftToBook?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,n.v_)(e.$t("lastDay")),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.eW)((0,n.v_)(e.$t("eventExpired")),1)],64))],2)]),(0,o.Lk)("header",p,[(0,o.Lk)("h1",v,(0,n.v_)(E.evento.nome_evento),1),(0,o.Lk)("p",k,(0,n.v_)(I.invertiData(E.evento.data)),1),(0,o.Lk)("p",u,(0,n.v_)(E.evento.artists),1),(0,o.Lk)("p",m,(0,n.v_)(E.evento.description),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("section",{class:(0,n.C4)(["form",{formExpired:E.daysLeftToBook<0}])},[E.daysLeftToBook<0?((0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("span",null,(0,n.v_)(e.$t("eventExpired")),1)])):(0,o.Q3)("",!0),(0,o.Lk)("h4",_,(0,n.v_)(e.$t("registerParticipantAtEvent")),1),(0,o.Lk)("div",y,[(0,o.Lk)("label",null,(0,n.v_)(e.$t("name")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>E.nome=e),type:"text",disabled:E.daysLeftToBook<0},null,8,h),[[i.Jo,E.nome]])]),(0,o.Lk)("div",g,[(0,o.Lk)("label",null,(0,n.v_)(e.$t("surname")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>E.cognome=e),type:"text",disabled:E.daysLeftToBook<0},null,8,f),[[i.Jo,E.cognome]])]),(0,o.Lk)("div",b,[(0,o.Lk)("label",null,(0,n.v_)(e.$t("dateOfBirth")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>E.data_di_nascita=e),type:"date",disabled:E.daysLeftToBook<0},null,8,B),[[i.Jo,E.data_di_nascita]])]),(0,o.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>I.aggiungiPartecipante&&I.aggiungiPartecipante(...e)),class:"btn primary",disabled:E.daysLeftToBook<0},(0,n.v_)(e.$t("joinButton")),9,C),(0,o.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>I.recuperaBiglietto&&I.recuperaBiglietto(...e)),class:"btn outline"},(0,n.v_)(e.$t("recoverTicketButton")),1),(0,o.Lk)("p",T,(0,n.v_)(e.$t("recoverTicketMessage")),1)],2)])])}a(4114);var E=a(7617),I=a(5697),w=a(8020),x={name:"EventoView",props:["eventoId"],data(){return{evento:null,nome:"",cognome:"",data_di_nascita:"",presenzaConfermata:!1,imgCopertinaURL:"",daysLeftToBook:""}},async mounted(){try{const e=(0,E.H9)(I.db,"eventi",this.eventoId),t=await(0,E.x7)(e);if(t.exists()){this.evento=t.data(),this.imgCopertinaURL=this.evento.imgCopertina;const e=new Date(this.evento.data)-new Date;this.daysLeftToBook=Math.ceil(e/864e5)}}catch(e){console.log(e)}},methods:{invertiData:w.E,async aggiungiPartecipante(){try{const e=(0,E.rJ)(I.db,"eventi",this.eventoId,"partecipanti");let t;console.log("ci sono");const a=await(0,E.gS)(e,{nome:this.nome,cognome:this.cognome,data_di_nascita:this.data_di_nascita,presenzaConfermata:this.presenzaConfermata});t=a.id,this.nome="",this.cognome="",this.data_di_nascita="",this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:t}})}catch(e){console.log(e)}},async recuperaBiglietto(){const e=(0,E.rJ)(I.db,"eventi",this.eventoId,"partecipanti"),t=(0,E.P)(e,(0,E._M)("nome","==",this.nome),(0,E._M)("cognome","==",this.cognome),(0,E._M)("data_di_nascita","==",this.data_di_nascita)),a=await(0,E.GG)(t);a.empty||(this.partecipanteId=a.id,this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:a.docs[0].id}}))}}},P=a(1241);const U=(0,P.A)(x,[["render",$],["__scopeId","data-v-bfbb6844"]]);var V=U}}]);
//# sourceMappingURL=788.8a14b1d0.js.map