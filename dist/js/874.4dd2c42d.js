"use strict";(self["webpackChunkeasyticket"]=self["webpackChunkeasyticket"]||[]).push([[874],{5874:function(t,e,a){a.r(e),a.d(e,{default:function(){return P}});var n=a(6768),i=a(4232),o=a(5130);const s={class:"background"},c={class:"wrapper"},r={key:0,class:"evento-dettagli-wrapper mt-5"},l=["src"],d={class:"mt-3"},p={class:"partecipante-form"},m={class:"mb-4"},u={class:"mb-3"},v={for:"nome_partecipante",class:"form-label"},h={class:"mb-3"},_={for:"cognome_partecipante",class:"form-label"},g={class:"mb-3"},k={for:"data_nascita_partecipante",class:"form-label"},b={class:"form-text",style:{width:"200px"}};function f(t,e,a,f,L,y){return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",c,[L.evento?((0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("img",{src:L.imgCopertinaURL,alt:""},null,8,l),(0,n.Lk)("div",null,[(0,n.Lk)("h1",d,(0,i.v_)(L.evento.nome_evento),1),(0,n.Lk)("h5",null,(0,i.v_)(y.invertiData(L.evento.data)),1)])])):(0,n.Q3)("",!0),(0,n.Lk)("form",p,[(0,n.Lk)("h4",m,(0,i.v_)(t.$t("registerParticipantAtEvent")),1),(0,n.Lk)("div",u,[(0,n.Lk)("label",v,(0,i.v_)(t.$t("name")),1),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>L.nome=t),type:"text",placeholder:"",class:"form-control",id:"nome_partecipante"},null,512),[[o.Jo,L.nome]])]),(0,n.Lk)("div",h,[(0,n.Lk)("label",_,(0,i.v_)(t.$t("surname")),1),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>L.cognome=t),type:"text",placeholder:"",class:"form-control"},null,512),[[o.Jo,L.cognome]])]),(0,n.Lk)("div",g,[(0,n.Lk)("label",k,(0,i.v_)(t.$t("dateOfBirth")),1),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>L.data_di_nascita=t),type:"date",placeholder:"",id:"data_nascita_partecipante",class:"form-control"},null,512),[[o.Jo,L.data_di_nascita]])]),(0,n.Lk)("button",{type:"button",onClick:e[3]||(e[3]=(...t)=>y.aggiungiPartecipante&&y.aggiungiPartecipante(...t)),class:"btn btn-primary mt-4"},(0,i.v_)(t.$t("joinButton")),1),(0,n.Lk)("button",{type:"button",onClick:e[4]||(e[4]=(...t)=>y.recuperaBiglietto&&y.recuperaBiglietto(...t)),class:"btn btn-outline-light mt-3 btn-sm"},(0,i.v_)(t.$t("recoverTicketButton")),1),(0,n.Lk)("div",b,(0,i.v_)(t.$t("recoverTicketMessage")),1)])])])}a(4114);var L=a(7617),y=a(5697),C=a(8020),I={name:"EventoView",props:["eventoId"],data(){return{evento:null,nome:"",cognome:"",data_di_nascita:"",presenzaConfermata:!1,imgCopertinaURL:""}},async mounted(){try{const t=(0,L.H9)(y.db,"eventi",this.eventoId),e=await(0,L.x7)(t);e.exists()&&(this.evento=e.data(),this.imgCopertinaURL=this.evento.imgCopertina)}catch(t){console.log(t)}},methods:{invertiData:C.E,async aggiungiPartecipante(){try{const t=(0,L.rJ)(y.db,"eventi",this.eventoId,"partecipanti");let e;console.log("ci sono");const a=await(0,L.gS)(t,{nome:this.nome,cognome:this.cognome,data_di_nascita:this.data_di_nascita,presenzaConfermata:this.presenzaConfermata});e=a.id,this.nome="",this.cognome="",this.data_di_nascita="",this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:e}})}catch(t){console.log(t)}},async recuperaBiglietto(){const t=(0,L.rJ)(y.db,"eventi",this.eventoId,"partecipanti"),e=(0,L.P)(t,(0,L._M)("nome","==",this.nome),(0,L._M)("cognome","==",this.cognome),(0,L._M)("data_di_nascita","==",this.data_di_nascita)),a=await(0,L.GG)(e);a.empty||(this.partecipanteId=a.id,this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:a.docs[0].id}}))}}},w=a(1241);const $=(0,w.A)(I,[["render",f],["__scopeId","data-v-302f1170"]]);var P=$}}]);
//# sourceMappingURL=874.4dd2c42d.js.map