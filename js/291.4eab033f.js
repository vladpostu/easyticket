"use strict";(self["webpackChunkeasyticket"]=self["webpackChunkeasyticket"]||[]).push([[291],{5291:function(t,e,a){a.r(e),a.d(e,{default:function(){return x}});var o=a(6768),n=a(4232),i=a(5130);const s={class:"background"},c={class:"wrapper"},r={key:0,class:"evento-dettagli-wrapper mt-5"},d=["src"],l={class:"evento-info"},p={class:"evento-titolo"},v={class:"evento-data"},m={class:"evento-artisti"},k={class:"evento-descrizione"},u={class:"partecipante-form"},_={class:"mb-4"},g={class:"mb-3"},h={for:"nome_partecipante",class:"form-label"},f={class:"mb-3"},L={for:"cognome_partecipante",class:"form-label"},b={class:"mb-3"},y={for:"data_nascita_partecipante",class:"form-label"},C={class:"form-text"};function B(t,e,a,B,w,$){return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",c,[w.evento?((0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("img",{src:w.imgCopertinaURL,alt:""},null,8,d),(0,o.Lk)("div",l,[(0,o.Lk)("h1",p,(0,n.v_)(w.evento.nome_evento),1),(0,o.Lk)("h5",v,(0,n.v_)($.invertiData(w.evento.data)),1),(0,o.Lk)("div",{class:(0,n.C4)(["leftDaysToBook",{danger:w.daysLeftToBook<=0,warning:w.daysLeftToBook>0&&w.daysLeftToBook<=3,ok:w.daysLeftToBook>3}])},[w.daysLeftToBook>0?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,n.v_)(t.$t("in"))+" "+(0,n.v_)(w.daysLeftToBook)+" "+(0,n.v_)(t.$t("days")),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,n.v_)(t.$t("eventExpired")),1)],64))],2),(0,o.Lk)("p",m,(0,n.v_)(w.evento.artists),1),(0,o.Lk)("p",k,(0,n.v_)(w.evento.description),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("form",u,[(0,o.Lk)("h4",_,(0,n.v_)(t.$t("registerParticipantAtEvent")),1),(0,o.Lk)("div",g,[(0,o.Lk)("label",h,(0,n.v_)(t.$t("name")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>w.nome=t),type:"text",class:"form-control",id:"nome_partecipante"},null,512),[[i.Jo,w.nome]])]),(0,o.Lk)("div",f,[(0,o.Lk)("label",L,(0,n.v_)(t.$t("surname")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>w.cognome=t),type:"text",class:"form-control"},null,512),[[i.Jo,w.cognome]])]),(0,o.Lk)("div",b,[(0,o.Lk)("label",y,(0,n.v_)(t.$t("dateOfBirth")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>w.data_di_nascita=t),type:"date",id:"data_nascita_partecipante",class:"form-control"},null,512),[[i.Jo,w.data_di_nascita]])]),(0,o.Lk)("button",{type:"button",onClick:e[3]||(e[3]=(...t)=>$.aggiungiPartecipante&&$.aggiungiPartecipante(...t)),class:"btn btn-primary mt-4"},(0,n.v_)(t.$t("joinButton")),1),(0,o.Lk)("button",{type:"button",onClick:e[4]||(e[4]=(...t)=>$.recuperaBiglietto&&$.recuperaBiglietto(...t)),class:"btn btn-outline-light mt-3 btn-sm"},(0,n.v_)(t.$t("recoverTicketButton")),1),(0,o.Lk)("div",C,(0,n.v_)(t.$t("recoverTicketMessage")),1)])])])}a(4114);var w=a(7617),$=a(5697),I=a(8020),T={name:"EventoView",props:["eventoId"],data(){return{evento:null,nome:"",cognome:"",data_di_nascita:"",presenzaConfermata:!1,imgCopertinaURL:"",daysLeftToBook:""}},async mounted(){try{const t=(0,w.H9)($.db,"eventi",this.eventoId),e=await(0,w.x7)(t);if(e.exists()){this.evento=e.data(),this.imgCopertinaURL=this.evento.imgCopertina;const t=new Date(this.evento.data)-new Date;this.daysLeftToBook=Math.ceil(t/864e5)}}catch(t){console.log(t)}},methods:{invertiData:I.E,async aggiungiPartecipante(){try{const t=(0,w.rJ)($.db,"eventi",this.eventoId,"partecipanti");let e;console.log("ci sono");const a=await(0,w.gS)(t,{nome:this.nome,cognome:this.cognome,data_di_nascita:this.data_di_nascita,presenzaConfermata:this.presenzaConfermata});e=a.id,this.nome="",this.cognome="",this.data_di_nascita="",this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:e}})}catch(t){console.log(t)}},async recuperaBiglietto(){const t=(0,w.rJ)($.db,"eventi",this.eventoId,"partecipanti"),e=(0,w.P)(t,(0,w._M)("nome","==",this.nome),(0,w._M)("cognome","==",this.cognome),(0,w._M)("data_di_nascita","==",this.data_di_nascita)),a=await(0,w.GG)(e);a.empty||(this.partecipanteId=a.id,this.$router.push({name:"PartecipanteView",params:{eventoId:this.eventoId,partecipanteId:a.docs[0].id}}))}}},E=a(1241);const P=(0,E.A)(T,[["render",B]]);var x=P}}]);
//# sourceMappingURL=291.4eab033f.js.map