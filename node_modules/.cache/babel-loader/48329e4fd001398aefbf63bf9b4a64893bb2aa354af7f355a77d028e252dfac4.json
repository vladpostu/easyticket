{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page\"\n};\nconst _hoisted_2 = {\n  class: \"layout\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"event-block\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  class: \"event-info\"\n};\nconst _hoisted_6 = {\n  class: \"event-title\"\n};\nconst _hoisted_7 = {\n  class: \"row-line\"\n};\nconst _hoisted_8 = {\n  class: \"event-date\"\n};\nconst _hoisted_9 = {\n  class: \"days-left\"\n};\nconst _hoisted_10 = {\n  class: \"event-artists\"\n};\nconst _hoisted_11 = {\n  class: \"event-description\"\n};\nconst _hoisted_12 = {\n  class: \"form\"\n};\nconst _hoisted_13 = {\n  class: \"form-title\"\n};\nconst _hoisted_14 = {\n  class: \"field\"\n};\nconst _hoisted_15 = {\n  class: \"field\"\n};\nconst _hoisted_16 = {\n  class: \"field\"\n};\nconst _hoisted_17 = {\n  class: \"note\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [$data.evento ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: $data.imgCopertinaURL,\n    class: \"event-img\"\n  }, null, 8 /* PROPS */, _hoisted_4), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h1\", _hoisted_6, _toDisplayString($data.evento.nome_evento), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"p\", _hoisted_8, _toDisplayString($options.invertiData($data.evento.data)), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_ctx.$t(\"in\")) + \" \" + _toDisplayString($data.daysLeftToBook) + \" \" + _toDisplayString(_ctx.$t(\"days\")), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_10, _toDisplayString($data.evento.artists), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_11, _toDisplayString($data.evento.description), 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", _hoisted_12, [_createElementVNode(\"h4\", _hoisted_13, _toDisplayString(_ctx.$t(\"registerParticipantAtEvent\")), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"label\", null, _toDisplayString(_ctx.$t(\"name\")), 1 /* TEXT */), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.nome = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.nome]])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"label\", null, _toDisplayString(_ctx.$t(\"surname\")), 1 /* TEXT */), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.cognome = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cognome]])]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"label\", null, _toDisplayString(_ctx.$t(\"dateOfBirth\")), 1 /* TEXT */), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.data_di_nascita = $event),\n    type: \"date\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.data_di_nascita]])]), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.aggiungiPartecipante && $options.aggiungiPartecipante(...args)),\n    class: \"btn primary\"\n  }, _toDisplayString(_ctx.$t(\"joinButton\")), 1 /* TEXT */), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.recuperaBiglietto && $options.recuperaBiglietto(...args)),\n    class: \"btn outline\"\n  }, _toDisplayString(_ctx.$t(\"recoverTicketButton\")), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_17, _toDisplayString(_ctx.$t(\"recoverTicketMessage\")), 1 /* TEXT */)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$data","evento","_hoisted_3","src","imgCopertinaURL","_hoisted_5","_hoisted_6","_toDisplayString","nome_evento","_hoisted_7","_hoisted_8","$options","invertiData","data","_hoisted_9","_ctx","$t","daysLeftToBook","_hoisted_10","artists","_hoisted_11","description","_hoisted_12","_hoisted_13","_hoisted_14","nome","$event","type","_hoisted_15","cognome","_hoisted_16","data_di_nascita","onClick","_cache","args","aggiungiPartecipante","recuperaBiglietto","_hoisted_17"],"sources":["/Users/vladpostu/Desktop/easyticket/views/EventoView.vue"],"sourcesContent":["<template>\n  <div class=\"page\">\n    <div class=\"layout\">\n\n      <div v-if=\"evento\" class=\"event-block\">\n        <img :src=\"imgCopertinaURL\" class=\"event-img\" />\n\n        <div class=\"event-info\">\n          <h1 class=\"event-title\">{{ evento.nome_evento }}</h1>\n\n          <div class=\"row-line\">\n            <p class=\"event-date\">{{ invertiData(evento.data) }}</p>\n            <span class=\"days-left\">{{ $t(\"in\") }} {{ daysLeftToBook }} {{ $t(\"days\") }}</span>\n          </div>\n\n          <p class=\"event-artists\">{{ evento.artists }}</p>\n          <p class=\"event-description\">{{ evento.description }}</p>\n        </div>\n      </div>\n\n      <form class=\"form\">\n        <h4 class=\"form-title\">{{ $t(\"registerParticipantAtEvent\") }}</h4>\n\n        <div class=\"field\">\n          <label>{{ $t(\"name\") }}</label>\n          <input v-model=\"nome\" type=\"text\" />\n        </div>\n\n        <div class=\"field\">\n          <label>{{ $t(\"surname\") }}</label>\n          <input v-model=\"cognome\" type=\"text\" />\n        </div>\n\n        <div class=\"field\">\n          <label>{{ $t(\"dateOfBirth\") }}</label>\n          <input v-model=\"data_di_nascita\" type=\"date\" />\n        </div>\n\n        <button type=\"button\" @click=\"aggiungiPartecipante\" class=\"btn primary\">{{ $t(\"joinButton\") }}</button>\n        <button type=\"button\" @click=\"recuperaBiglietto\" class=\"btn outline\">{{ $t(\"recoverTicketButton\") }}</button>\n\n        <p class=\"note\">{{ $t(\"recoverTicketMessage\") }}</p>\n      </form>\n\n    </div>\n  </div>\n</template>\n\n<style>\n.page {\n  width: 100%;\n  min-height: 100vh;\n  background: #0C2B4E;\n  display: flex;\n  justify-content: center;\n  padding: 60px 20px;\n  color: #fff;\n}\n\n.layout {\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  gap: 70px;\n  flex-wrap: wrap;\n  max-width: 1100px;\n  width: 100%;\n}\n\n/* EVENT BLOCK */\n.event-block {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 460px;\n}\n\n.event-img {\n  width: 100%;\n  height: 300px;\n  object-fit: cover;\n  border-radius: 14px;\n  box-shadow: 0 6px 20px rgba(0,0,0,0.35);\n}\n\n.event-info {\n  width: 100%;\n  margin-top: 20px;\n  text-align: center;\n}\n\n.event-title {\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 10px;\n}\n\n.row-line {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n\n.event-date {\n  color: #d2e2ef;\n  font-size: 1rem;\n  font-weight: 500;\n}\n\n.days-left {\n  background: #e8f0ff;\n  color: #1b3b69;\n  padding: 4px 10px; /* ridotto */\n  border-radius: 4px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  display: inline-flex;\n  align-items: center;\n  line-height: 1;\n}\n\n\n.event-artists {\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin-top: 6px;\n}\n\n.event-description {\n  margin-top: 10px;\n  font-size: 1rem;\n  line-height: 1.6rem;\n  color: #d4e0ea;\n}\n\n/* FORM */\n.form {\n  width: 380px;\n  background: rgba(255,255,255,0.08);\n  padding: 35px 40px;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  box-shadow: 0 4px 18px rgba(0,0,0,0.28);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.form-title {\n  font-size: 1.3rem;\n  margin-bottom: 25px;\n  font-weight: 600;\n}\n\n.field {\n  width: 100%;\n  margin-bottom: 18px;\n}\n\n.field label {\n  font-size: 0.9rem;\n  margin-bottom: 6px;\n  display: block;\n  opacity: 0.9;\n}\n\n.field input {\n  width: 100%;\n  padding: 10px 12px;\n  border-radius: 6px;\n  border: none;\n  background: rgba(255,255,255,0.95);\n  color: #0c2b4e;\n  font-weight: 500;\n}\n\n.btn {\n  width: 100%;\n  padding: 11px 0;\n  border-radius: 6px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: 0.25s ease;\n  margin-top: 4px;\n}\n\n.primary {\n  background: #1B74BB;\n  color: #fff;\n  border: none;\n}\n.primary:hover {\n  background: #165f98;\n}\n\n.outline {\n  background: transparent;\n  color: #fff;\n  border: 1.6px solid #dce6f1;\n  margin-top: 14px;\n}\n\n.outline:hover {\n  background: rgba(255,255,255,0.15);\n}\n\n.note {\n  margin-top: 14px;\n  font-size: 0.85rem;\n  text-align: center;\n  opacity: 0.85;\n}\n\n/* RESPONSIVE */\n@media (max-width: 768px) {\n  .layout {\n    flex-direction: column-reverse;\n    align-items: center;\n    gap: 40px;\n  }\n\n  .event-block,\n  .form {\n    width: 100%;\n    max-width: 360px;\n  }\n\n  .event-img {\n    height: 230px;\n  }\n}\n</style>\n\n\n\n<script>\nimport { getDoc, doc, addDoc, collection, query, where, getDocs } from 'firebase/firestore'\nimport { db } from '../firebase/firebase'\nimport { invertiData } from '@/utils/dateUtils';\n\nexport default {\n    name: \"EventoView\",\n    props: ['eventoId'],\n    data() {\n        return {\n            evento: null,\n            nome: \"\",\n            cognome: \"\",\n            data_di_nascita: \"\",\n            presenzaConfermata: false,\n            imgCopertinaURL: \"\",\n            daysLeftToBook: \"\",\n        }\n    },\n    async mounted() {\n        try {\n            const docRef = doc(db, 'eventi', this.eventoId)\n            const docSnap = await getDoc(docRef)\n\n            if (docSnap.exists()) {\n                this.evento = docSnap.data()\n                this.imgCopertinaURL = this.evento.imgCopertina;\n                const dif = new Date(this.evento.data) - (new Date)\n                this.daysLeftToBook = Math.ceil(dif / (1000 * 60 * 60 * 24))\n            }\n        } catch (error) {\n            console.log(error)\n        }\n\n    },\n    methods: {\n        invertiData,\n        async aggiungiPartecipante() {\n            try {\n              const partecipanteRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\")\n            let partecipanteId;\n\n            console.log(\"ci sono\")\n\n            const docRef = await addDoc(partecipanteRef, {\n                nome: this.nome,\n                cognome: this.cognome,\n                data_di_nascita: this.data_di_nascita,\n                presenzaConfermata: this.presenzaConfermata,\n            });\n\n            partecipanteId = docRef.id;\n\n            this.nome = \"\";\n            this.cognome = \"\";\n            this.data_di_nascita = \"\";\n\n            this.$router.push({\n                name: \"PartecipanteView\",\n                params: {\n                    eventoId: this.eventoId,\n                    partecipanteId: partecipanteId,\n                }\n            })\n            } catch(error) {\n              console.log(error);\n            }\n        },\n        async recuperaBiglietto() {\n\n            const partecipantiRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\");\n\n            const q = query(\n                partecipantiRef,\n                where(\"nome\", \"==\", this.nome),\n                where(\"cognome\", \"==\", this.cognome),\n                where(\"data_di_nascita\", \"==\", this.data_di_nascita)\n            );\n\n            const snapshot = await getDocs(q);\n\n            if (!snapshot.empty) {\n                this.partecipanteId = snapshot.id;\n                this.$router.push({\n                    name: \"PartecipanteView\",\n                    params: {\n                        eventoId: this.eventoId,\n                        partecipanteId: snapshot.docs[0].id,\n                    }\n\n                })\n            }\n        }\n    }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}