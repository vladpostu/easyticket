{"ast":null,"code":"import { createRouter, createWebHashHistory } from 'vue-router';\nimport IndexView from '../views/IndexView.vue';\nimport HomePage from '../views/HomePage.vue';\nimport SecondPage from '../views/SecondPage.vue';\nimport AreaRiservata from '../views/AreaRiservata.vue';\nimport AreaOrganizzatore from '../views/area_riservata/AreaOrganizzatore.vue';\nimport EventiOrganizzatore from '../views/area_riservata/EventiOrganizzatore.vue';\nimport OrganizzatoreLogin from '../views/area_riservata/OrganizzatoreLogin.vue';\nimport OrganizzatoreRegistrati from '../views/area_riservata/OrganizzatoreRegistrati.vue';\nimport AggiungiEvento from '../views/area_riservata/AggiungiEvento.vue';\nimport AreaConvalidatore from '../views/area_riservata/AreaConvalidatore.vue';\nimport { getAuth } from 'firebase/auth';\nimport { onAuthStateChanged } from 'firebase/auth';\nconst routes = [{\n  path: '/:lang(it|en)?'\n}];\nconst router = createRouter({\n  history: createWebHashHistory('/easyticket/'),\n  routes\n});\nfunction getCurrentUser() {\n  return new Promise((resolve, reject) => {\n    const unsubscribe = onAuthStateChanged(getAuth(), user => {\n      unsubscribe();\n      resolve(user);\n    }, reject);\n  });\n}\nrouter.beforeEach(async (to, from, next) => {\n  //const auth = getAuth();\n  const user = await getCurrentUser();\n  if (to.path.startsWith(\"/area-riservata/area-organizzatore\") && !user) {\n    next(\"/area-riservata/organizzatore-login\");\n  } else if (to.path.startsWith(\"/area-riservata/organizzatore-login\") && user) {\n    next(\"/home\");\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHashHistory","IndexView","HomePage","SecondPage","AreaRiservata","AreaOrganizzatore","EventiOrganizzatore","OrganizzatoreLogin","OrganizzatoreRegistrati","AggiungiEvento","AreaConvalidatore","getAuth","onAuthStateChanged","routes","path","router","history","getCurrentUser","Promise","resolve","reject","unsubscribe","user","beforeEach","to","from","next","startsWith"],"sources":["/Users/vladpostu/Desktop/easyticket/router/index.js"],"sourcesContent":["import { createRouter, createWebHashHistory } from 'vue-router'\n\nimport IndexView from '../views/IndexView.vue'\nimport HomePage from '../views/HomePage.vue'\nimport SecondPage from '../views/SecondPage.vue'\nimport AreaRiservata from '../views/AreaRiservata.vue'\nimport AreaOrganizzatore from '../views/area_riservata/AreaOrganizzatore.vue'\nimport EventiOrganizzatore from '../views/area_riservata/EventiOrganizzatore.vue'\nimport OrganizzatoreLogin from '../views/area_riservata/OrganizzatoreLogin.vue'\nimport OrganizzatoreRegistrati from '../views/area_riservata/OrganizzatoreRegistrati.vue'\nimport AggiungiEvento from '../views/area_riservata/AggiungiEvento.vue'\nimport AreaConvalidatore from '../views/area_riservata/AreaConvalidatore.vue'\nimport { getAuth } from 'firebase/auth'\nimport { onAuthStateChanged } from 'firebase/auth'\n\nconst routes = [\n    {\n        path: '/:lang(it|en)?'\n    }\n]\n\nconst router = createRouter({\n    history: createWebHashHistory('/easyticket/'),\n    routes\n})\n\n\nfunction getCurrentUser() {\n  return new Promise((resolve, reject) => {\n    const unsubscribe = onAuthStateChanged(\n      getAuth(),\n      user => {\n        unsubscribe()\n        resolve(user)\n      },\n      reject\n    )\n  })\n}\n\nrouter.beforeEach(async (to, from, next) => {\n    //const auth = getAuth();\n    const user = await getCurrentUser()\n\n    if(to.path.startsWith(\"/area-riservata/area-organizzatore\") && !user) {\n        next(\"/area-riservata/organizzatore-login\")\n    } \n    else if(to.path.startsWith(\"/area-riservata/organizzatore-login\") && user) {\n        next(\"/home\")\n    } else {\n        next()\n    }\n})\n\nexport default router"],"mappings":"AAAA,SAASA,YAAY,EAAEC,oBAAoB,QAAQ,YAAY;AAE/D,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,aAAa,MAAM,4BAA4B;AACtD,OAAOC,iBAAiB,MAAM,+CAA+C;AAC7E,OAAOC,mBAAmB,MAAM,iDAAiD;AACjF,OAAOC,kBAAkB,MAAM,gDAAgD;AAC/E,OAAOC,uBAAuB,MAAM,qDAAqD;AACzF,OAAOC,cAAc,MAAM,4CAA4C;AACvE,OAAOC,iBAAiB,MAAM,+CAA+C;AAC7E,SAASC,OAAO,QAAQ,eAAe;AACvC,SAASC,kBAAkB,QAAQ,eAAe;AAElD,MAAMC,MAAM,GAAG,CACX;EACIC,IAAI,EAAE;AACV,CAAC,CACJ;AAED,MAAMC,MAAM,GAAGhB,YAAY,CAAC;EACxBiB,OAAO,EAAEhB,oBAAoB,CAAC,cAAc,CAAC;EAC7Ca;AACJ,CAAC,CAAC;AAGF,SAASI,cAAcA,CAAA,EAAG;EACxB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,WAAW,GAAGT,kBAAkB,CACpCD,OAAO,CAAC,CAAC,EACTW,IAAI,IAAI;MACND,WAAW,CAAC,CAAC;MACbF,OAAO,CAACG,IAAI,CAAC;IACf,CAAC,EACDF,MACF,CAAC;EACH,CAAC,CAAC;AACJ;AAEAL,MAAM,CAACQ,UAAU,CAAC,OAAOC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACxC;EACA,MAAMJ,IAAI,GAAG,MAAML,cAAc,CAAC,CAAC;EAEnC,IAAGO,EAAE,CAACV,IAAI,CAACa,UAAU,CAAC,oCAAoC,CAAC,IAAI,CAACL,IAAI,EAAE;IAClEI,IAAI,CAAC,qCAAqC,CAAC;EAC/C,CAAC,MACI,IAAGF,EAAE,CAACV,IAAI,CAACa,UAAU,CAAC,qCAAqC,CAAC,IAAIL,IAAI,EAAE;IACvEI,IAAI,CAAC,OAAO,CAAC;EACjB,CAAC,MAAM;IACHA,IAAI,CAAC,CAAC;EACV;AACJ,CAAC,CAAC;AAEF,eAAeX,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}