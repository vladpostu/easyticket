{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getDoc, doc, addDoc, collection, query, where, getDocs } from 'firebase/firestore';\nimport { db } from '../firebase/firebase';\nimport { invertiData } from '@/utils/dateUtils';\nexport default {\n  name: \"EventoView\",\n  props: ['eventoId'],\n  data() {\n    return {\n      evento: null,\n      nome: \"\",\n      cognome: \"\",\n      data_di_nascita: \"\",\n      presenzaConfermata: false,\n      imgCopertinaURL: \"\",\n      daysLeftToBook: \"\"\n    };\n  },\n  async mounted() {\n    try {\n      const docRef = doc(db, 'eventi', this.eventoId);\n      const docSnap = await getDoc(docRef);\n      if (docSnap.exists()) {\n        this.evento = docSnap.data();\n        this.imgCopertinaURL = this.evento.imgCopertina;\n        const dif = new Date(this.evento.data) - new Date();\n        this.daysLeftToBook = Math.ceil(dif / (1000 * 60 * 60 * 24));\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  },\n  methods: {\n    invertiData,\n    async aggiungiPartecipante() {\n      try {\n        const partecipanteRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\");\n        let partecipanteId;\n        console.log(\"ci sono\");\n        const docRef = await addDoc(partecipanteRef, {\n          nome: this.nome,\n          cognome: this.cognome,\n          data_di_nascita: this.data_di_nascita,\n          presenzaConfermata: this.presenzaConfermata\n        });\n        partecipanteId = docRef.id;\n        this.nome = \"\";\n        this.cognome = \"\";\n        this.data_di_nascita = \"\";\n        this.$router.push({\n          name: \"PartecipanteView\",\n          params: {\n            eventoId: this.eventoId,\n            partecipanteId: partecipanteId\n          }\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async recuperaBiglietto() {\n      const partecipantiRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\");\n      const q = query(partecipantiRef, where(\"nome\", \"==\", this.nome), where(\"cognome\", \"==\", this.cognome), where(\"data_di_nascita\", \"==\", this.data_di_nascita));\n      const snapshot = await getDocs(q);\n      if (!snapshot.empty) {\n        this.partecipanteId = snapshot.id;\n        this.$router.push({\n          name: \"PartecipanteView\",\n          params: {\n            eventoId: this.eventoId,\n            partecipanteId: snapshot.docs[0].id\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["getDoc","doc","addDoc","collection","query","where","getDocs","db","invertiData","name","props","data","evento","nome","cognome","data_di_nascita","presenzaConfermata","imgCopertinaURL","daysLeftToBook","mounted","docRef","eventoId","docSnap","exists","imgCopertina","dif","Date","Math","ceil","error","console","log","methods","aggiungiPartecipante","partecipanteRef","partecipanteId","id","$router","push","params","recuperaBiglietto","partecipantiRef","q","snapshot","empty","docs"],"sources":["/Users/vladpostu/Desktop/easyticket/views/EventoView.vue"],"sourcesContent":["<template>\n  <div class=\"background\">\n    <div class=\"wrapper\">\n\n      <div v-if=\"evento\" class=\"evento-dettagli-wrapper mt-5\">\n        <img :src=\"imgCopertinaURL\" alt=\"\">\n\n        <div class=\"evento-info\">\n          <h1 class=\"evento-titolo\"> {{ evento.nome_evento }}</h1>\n          <h5 class=\"evento-data\"> {{ invertiData(evento.data) }} </h5>\n          <<div class=\"leftDaysToBook\" :class=\"{\n            danger: daysLeftToBook <= 0,\n            warning: daysLeftToBook > 0 && daysLeftToBook <= 3,\n            ok: daysLeftToBook > 3\n          }\">\n            <template v-if=\"daysLeftToBook > 0\">\n              {{ $t(\"in\") }} {{ daysLeftToBook }} {{ $t(\"days\") }}\n            </template>\n\n            <template v-else>\n              {{ $t(\"eventExpired\") }}\n            </template>\n        </div>\n\n\n        <p class=\"evento-artisti\">{{ evento.artists }}</p>\n\n        <p class=\"evento-descrizione\">\n          {{ evento.description }}\n        </p>\n      </div>\n    </div>\n\n    <form class=\"partecipante-form\">\n      <h4 class=\"mb-4\">{{ $t(\"registerParticipantAtEvent\") }}</h4>\n\n      <div class=\"mb-3\">\n        <label for=\"nome_partecipante\" class=\"form-label\">{{ $t(\"name\") }}</label>\n        <input v-model=\"nome\" type=\"text\" class=\"form-control\" id=\"nome_partecipante\" />\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"cognome_partecipante\" class=\"form-label\">{{ $t(\"surname\") }}</label>\n        <input v-model=\"cognome\" type=\"text\" class=\"form-control\" />\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"data_nascita_partecipante\" class=\"form-label\">{{ $t(\"dateOfBirth\") }}</label>\n        <input v-model=\"data_di_nascita\" type=\"date\" id=\"data_nascita_partecipante\" class=\"form-control\">\n      </div>\n\n      <button type=\"button\" @click=\"aggiungiPartecipante\" class=\"btn btn-primary mt-4\">\n        {{ $t(\"joinButton\") }}\n      </button>\n\n      <button type=\"button\" @click=\"recuperaBiglietto\" class=\"btn btn-outline-light mt-3 btn-sm\">\n        {{ $t(\"recoverTicketButton\") }}\n      </button>\n\n      <div class=\"form-text\">{{ $t(\"recoverTicketMessage\") }}</div>\n    </form>\n\n  </div>\n  </div>\n</template>\n\n<style>\n.background {\n  background-color: #0C2B4E;\n  min-height: 100vh;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #F4F4F4;\n  padding: 60px 20px;\n}\n\n.wrapper {\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n  gap: 80px;\n  flex-wrap: wrap-reverse;\n  max-width: 1200px;\n  width: 100%;\n}\n\n/* --- DETTAGLI EVENTO --- */\n.evento-dettagli-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n}\n\n.evento-dettagli-wrapper img {\n  width: 450px;\n  height: 300px;\n  object-fit: cover;\n  border-radius: 12px;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);\n}\n\n.evento-info {\n  margin-top: 20px;\n}\n\n/* TITOLO */\n.evento-titolo {\n  font-size: 2rem;\n  font-weight: 700;\n  color: #fff;\n}\n\n/* DATA */\n.evento-data {\n  font-size: 1.1rem;\n  font-weight: 500;\n  color: #cfe0ec;\n  margin-top: 4px;\n}\n\n/* ARTISTI */\n.evento-artisti {\n  margin-top: 12px;\n  font-size: 1.15rem;\n  font-weight: 600;\n  color: #ffffff;\n  opacity: 0.9;\n}\n\n/* DESCRIZIONE */\n.evento-descrizione {\n  margin-top: 12px;\n  font-size: 0.95rem;\n  line-height: 1.5rem;\n  color: #d5dfe8;\n  max-width: 600px;\n}\n\n/* --- FORM --- */\n.partecipante-form {\n  background: rgba(255, 255, 255, 0.08);\n  border-radius: 12px;\n  padding: 40px 50px;\n  box-shadow: 0 5px 18px rgba(0, 0, 0, 0.25);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 420px;\n  backdrop-filter: blur(8px);\n}\n\n.partecipante-form h4 {\n  margin-bottom: 25px;\n  font-weight: 600;\n  color: #fff;\n}\n\n.mb-3 {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  margin-bottom: 20px;\n}\n\n.mb-3 label {\n  font-size: 0.95rem;\n  color: #d7e7f3;\n  margin-bottom: 6px;\n}\n\n.mb-3 input {\n  width: 100%;\n  border: none;\n  border-radius: 6px;\n  padding: 10px 12px;\n  outline: none;\n  background-color: rgba(255, 255, 255, 0.9);\n  color: #0C2B4E;\n  font-weight: 500;\n}\n\n.mb-3 input:focus {\n  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);\n}\n\n/* --- BOTTONI --- */\n.btn {\n  width: 100%;\n  border-radius: 6px;\n  padding: 10px 0;\n  font-weight: 600;\n  transition: all 0.25s ease-in-out;\n  cursor: pointer;\n}\n\n.btn-primary {\n  background-color: #1B74BB;\n  border: none;\n  color: #fff;\n}\n\n.btn-primary:hover {\n  background-color: #155f99;\n}\n\n.btn-outline-light {\n  border: 1.5px solid #e6eef5;\n  background-color: transparent;\n  color: #f4f4f4;\n}\n\n.btn-outline-light:hover {\n  background-color: rgba(255, 255, 255, 0.15);\n}\n\n/* --- TESTO INFORMATIVO --- */\n.form-text {\n  font-size: 0.85rem;\n  margin-top: 10px;\n  text-align: center;\n  color: #e0e0e0;\n  line-height: 1.3;\n  width: 80%;\n}\n\n/* --- RESPONSIVE --- */\n@media (max-width: 768px) {\n  .wrapper {\n    flex-direction: column-reverse;\n    gap: 40px;\n    padding: 30px 20px;\n    align-items: center;\n  }\n\n  .evento-dettagli-wrapper img {\n    width: 100%;\n    max-width: 360px;\n    height: 240px;\n  }\n\n  .evento-descrizione {\n    max-width: 90%;\n  }\n\n  .partecipante-form {\n    width: 100%;\n    max-width: 360px;\n    padding: 30px;\n  }\n}\n</style>\n\n\n<script>\nimport { getDoc, doc, addDoc, collection, query, where, getDocs } from 'firebase/firestore'\nimport { db } from '../firebase/firebase'\nimport { invertiData } from '@/utils/dateUtils';\n\nexport default {\n  name: \"EventoView\",\n  props: ['eventoId'],\n  data() {\n    return {\n      evento: null,\n      nome: \"\",\n      cognome: \"\",\n      data_di_nascita: \"\",\n      presenzaConfermata: false,\n      imgCopertinaURL: \"\",\n      daysLeftToBook: \"\",\n    }\n  },\n  async mounted() {\n    try {\n      const docRef = doc(db, 'eventi', this.eventoId)\n      const docSnap = await getDoc(docRef)\n\n      if (docSnap.exists()) {\n        this.evento = docSnap.data()\n        this.imgCopertinaURL = this.evento.imgCopertina;\n        const dif = new Date(this.evento.data) - (new Date)\n        this.daysLeftToBook = Math.ceil(dif / (1000 * 60 * 60 * 24))\n      }\n    } catch (error) {\n      console.log(error)\n    }\n\n  },\n  methods: {\n    invertiData,\n    async aggiungiPartecipante() {\n      try {\n        const partecipanteRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\")\n        let partecipanteId;\n\n        console.log(\"ci sono\")\n\n        const docRef = await addDoc(partecipanteRef, {\n          nome: this.nome,\n          cognome: this.cognome,\n          data_di_nascita: this.data_di_nascita,\n          presenzaConfermata: this.presenzaConfermata,\n        });\n\n        partecipanteId = docRef.id;\n\n        this.nome = \"\";\n        this.cognome = \"\";\n        this.data_di_nascita = \"\";\n\n        this.$router.push({\n          name: \"PartecipanteView\",\n          params: {\n            eventoId: this.eventoId,\n            partecipanteId: partecipanteId,\n          }\n        })\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async recuperaBiglietto() {\n\n      const partecipantiRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\");\n\n      const q = query(\n        partecipantiRef,\n        where(\"nome\", \"==\", this.nome),\n        where(\"cognome\", \"==\", this.cognome),\n        where(\"data_di_nascita\", \"==\", this.data_di_nascita)\n      );\n\n      const snapshot = await getDocs(q);\n\n      if (!snapshot.empty) {\n        this.partecipanteId = snapshot.id;\n        this.$router.push({\n          name: \"PartecipanteView\",\n          params: {\n            eventoId: this.eventoId,\n            partecipanteId: snapshot.docs[0].id,\n          }\n\n        })\n      }\n    }\n  }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}