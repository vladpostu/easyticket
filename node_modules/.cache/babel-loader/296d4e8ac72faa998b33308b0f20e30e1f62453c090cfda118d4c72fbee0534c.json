{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"evento-dettagli-wrapper\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = {\n  class: \"partecipante_form\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [$data.evento ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"img\", {\n    src: $data.imgCopertinaURL,\n    alt: \"\"\n  }, null, 8 /* PROPS */, _hoisted_2), _createElementVNode(\"h1\", null, _toDisplayString($data.evento.nome_evento), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.nome = $event),\n    type: \"text\",\n    placeholder: \"nome\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.nome]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.cognome = $event),\n    type: \"text\",\n    placeholder: \"cognome\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cognome]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.data_di_nascita = $event),\n    type: \"text\",\n    placeholder: \"data di nascita\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.data_di_nascita]])]), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.aggiungiPartecipante && $options.aggiungiPartecipante(...args))\n  }, \"Partecipa\"), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.recuperaBiglietto && $options.recuperaBiglietto(...args))\n  }, \"Recupera biglietto\")], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","$data","evento","_createElementBlock","_hoisted_1","_createElementVNode","src","imgCopertinaURL","alt","_toDisplayString","nome_evento","_hoisted_3","nome","$event","type","placeholder","cognome","data_di_nascita","onClick","_cache","args","$options","aggiungiPartecipante","recuperaBiglietto"],"sources":["/Users/vladpostu/Desktop/easyticket/views/EventoView.vue"],"sourcesContent":["<template>\n    <div v-if=\"evento\" class=\"evento-dettagli-wrapper\">\n        <img :src=\"imgCopertinaURL\" alt=\"\">\n        <h1> {{ evento.nome_evento }}</h1>\n    </div>\n    <div class=\"partecipante_form\">\n        <input v-model=\"nome\" type=\"text\" placeholder=\"nome\">\n        <input v-model=\"cognome\" type=\"text\" placeholder=\"cognome\">\n        <input v-model=\"data_di_nascita\" type=\"text\" placeholder=\"data di nascita\">\n    </div>\n    <button @click=\"aggiungiPartecipante\">Partecipa</button>\n    <button @click=\"recuperaBiglietto\">Recupera biglietto</button>\n     \n</template>\n\n<style scoped> \n    .evento-dettagli-wrapper {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-around;\n        width: 800px;\n        border: 1px solid black;\n        max-width: 90%;\n        left: 50%;\n        position: relative;\n        transform: translateX(-50%);\n    \n    }\n\n    .evento-dettagli-wrapper img {\n        max-width: 400px;\n    }\n</style>\n\n<script>\nimport {getDoc, doc, addDoc, collection, query, where, getDocs } from 'firebase/firestore'\nimport { db } from '../firebase/firebase'\n\nexport default {\n    name: \"EventoView\",\n    props: ['eventoId'],\n    data() {\n        return {\n            evento: null,\n            nome: \"\",\n            cognome: \"\",\n            data_di_nascita: \"\",\n            presenzaConfermata: false,\n            imgCopertinaURL: \"\",\n        }\n    },\n    async mounted() {\n        try {\n            const docRef = doc(db, 'eventi', this.eventoId)\n            const docSnap = await getDoc(docRef)\n\n            if(docSnap.exists()) {\n                this.evento = docSnap.data()\n                this.imgCopertinaURL = this.evento.imgCopertina;\n            } \n        } catch(error) {\n            console.log(error)\n        }\n    },\n    methods: {\n        async aggiungiPartecipante() {\n            const partecipanteRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\")\n            var partecipanteId = this.nome + \"_\" + this.cognome \n\n            const docRef = await addDoc(partecipanteRef, {\n                nome: this.nome,\n                cognome: this.cognome,\n                data_di_nascita: this.data_di_nascita,\n                presenzaConfermata: this.presenzaConfermata\n            });\n\n            partecipanteId = docRef.id;\n\n            this.nome = \"\";\n            this.cognome = \"\";\n            this.data_di_nascita = \"\";\n\n            this.$router.push({\n                name: \"PartecipanteView\",\n                params: {\n                    eventoId: this.eventoId,\n                    partecipanteId: partecipanteId,\n                }\n            })\n        },\n        async recuperaBiglietto() {\n\n            const partecipantiRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\");\n\n            const q = query(\n                partecipantiRef,\n                where(\"nome\", \"==\", this.nome),\n                where(\"cognome\", \"==\", this.cognome),\n                where(\"data_di_nascita\", \"==\", this.data_di_nascita)\n            );\n\n            const snapshot = await getDocs(q);\n\n            if(!snapshot.empty) {\n                this.partecipanteId = snapshot.id;\n                this.$router.push({\n                name: \"PartecipanteView\",\n                params: {\n                    eventoId: this.eventoId,\n                    partecipanteId: snapshot.docs[0].id,\n                }\n                \n            })\n        }\n    }\n}\n}\n</script>"],"mappings":";;;EACuBA,KAAK,EAAC;;;;EAIpBA,KAAK,EAAC;AAAmB;;6DAJnBC,KAAA,CAAAC,MAAM,I,cAAjBC,mBAAA,CAGM,OAHNC,UAGM,GAFFC,mBAAA,CAAmC;IAA7BC,GAAG,EAAEL,KAAA,CAAAM,eAAe;IAAEC,GAAG,EAAC;uCAChCH,mBAAA,CAAkC,YAAAI,gBAAA,CAA1BR,KAAA,CAAAC,MAAM,CAACQ,WAAW,iB,wCAE9BL,mBAAA,CAIM,OAJNM,UAIM,G,gBAHFN,mBAAA,CAAqD;+DAArCJ,KAAA,CAAAW,IAAI,GAAAC,MAAA;IAAEC,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAA9Bd,KAAA,CAAAW,IAAI,E,mBACpBP,mBAAA,CAA2D;+DAA3CJ,KAAA,CAAAe,OAAO,GAAAH,MAAA;IAAEC,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAAjCd,KAAA,CAAAe,OAAO,E,mBACvBX,mBAAA,CAA2E;+DAA3DJ,KAAA,CAAAgB,eAAe,GAAAJ,MAAA;IAAEC,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAAzCd,KAAA,CAAAgB,eAAe,E,KAEnCZ,mBAAA,CAAwD;IAA/Ca,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,oBAAA,IAAAD,QAAA,CAAAC,oBAAA,IAAAF,IAAA,CAAoB;KAAE,WAAS,GAC/Cf,mBAAA,CAA8D;IAArDa,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAE,iBAAA,IAAAF,QAAA,CAAAE,iBAAA,IAAAH,IAAA,CAAiB;KAAE,oBAAkB,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}