{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getDoc, doc, addDoc, collection, query, where, getDocs } from 'firebase/firestore';\nimport { db } from '../firebase/firebase';\nexport default {\n  name: \"EventoView\",\n  props: ['eventoId'],\n  data() {\n    return {\n      evento: null,\n      nome: \"\",\n      cognome: \"\",\n      data_di_nascita: \"\",\n      presenzaConfermata: false,\n      imgCopertinaURL: \"\"\n    };\n  },\n  async mounted() {\n    try {\n      const docRef = doc(db, 'eventi', this.eventoId);\n      const docSnap = await getDoc(docRef);\n      if (docSnap.exists()) {\n        this.evento = docSnap.data();\n        this.imgCopertinaURL = this.evento.imgCopertina;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  },\n  methods: {\n    async aggiungiPartecipante() {\n      const partecipanteRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\");\n      var partecipanteId = this.nome + \"_\" + this.cognome;\n      const docRef = await addDoc(partecipanteRef, {\n        nome: this.nome,\n        cognome: this.cognome,\n        data_di_nascita: this.data_di_nascita,\n        presenzaConfermata: this.presenzaConfermata\n      });\n      partecipanteId = docRef.id;\n      this.nome = \"\";\n      this.cognome = \"\";\n      this.data_di_nascita = \"\";\n      this.$router.push({\n        name: \"PartecipanteView\",\n        params: {\n          eventoId: this.eventoId,\n          partecipanteId: partecipanteId\n        }\n      });\n    },\n    async recuperaBiglietto() {\n      const partecipantiRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\");\n      const q = query(partecipantiRef, where(\"nome\", \"==\", this.nome), where(\"cognome\", \"==\", this.cognome), where(\"data_di_nascita\", \"==\", this.data_di_nascita));\n      const snapshot = await getDocs(q);\n      if (!snapshot.empty) {\n        this.partecipanteId = snapshot.id;\n        this.$router.push({\n          name: \"PartecipanteView\",\n          params: {\n            eventoId: this.eventoId,\n            partecipanteId: snapshot.docs[0].id\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["getDoc","doc","addDoc","collection","query","where","getDocs","db","name","props","data","evento","nome","cognome","data_di_nascita","presenzaConfermata","imgCopertinaURL","mounted","docRef","eventoId","docSnap","exists","imgCopertina","error","console","log","methods","aggiungiPartecipante","partecipanteRef","partecipanteId","id","$router","push","params","recuperaBiglietto","partecipantiRef","q","snapshot","empty","docs"],"sources":["/Users/vladpostu/Desktop/easyticket/views/EventoView.vue"],"sourcesContent":["<template>\n    <div class=\"wrapper\">\n        <div v-if=\"evento\" class=\"evento-dettagli-wrapper mt-5\">\n            <img :src=\"imgCopertinaURL\" alt=\"\">\n            <div>\n                <h1> {{ evento.nome_evento }}</h1>\n                <h5> {{ evento.data  }} </h5>\n            </div>\n        </div>\n        <form class=\"partecipante-form\">\n            <div class=\"mb-3\">\n                <label for=\"nome_partecipante\" class=\"form-label\">Nome</label>\n                <input v-model=\"nome\" type=\"text\" placeholder=\"\" class=\"form-control\" id=\"nome_partecipante\" />\n            </div>\n            <div class=\"mb-3\">\n                <label for=\"cognome_partecipante\" class=\"form-label\">Cognome</label>\n                <input v-model=\"cognome\" type=\"text\" placeholder=\"\" class=\"form-control\" />\n            </div>\n            <div class=\"mb-3\">\n                <label for=\"data_nascita_partecipante\" class=\"form-labels\">Data di nascita </label>\n                <input v-model=\"data_di_nascita\" type=\"date\" placeholder=\"\" id=\"data_nascita_partecipante\" class=\"form-control\">\n            </div>\n            <button @click=\"aggiungiPartecipante\" class=\"btn btn-primary\">Partecipa</button>\n            <button @click=\"recuperaBiglietto\" class=\"btn btn-outline-secondary mt-3 btn-sm\">Recupera biglietto</button>\n        </form>\n    </div>\n     \n</template>\n\n<style scoped> \n    .evento-dettagli-wrapper {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .evento-dettagli-wrapper img {\n        width: 500px;\n    }\n\n    .wrapper {\n        display: flex;\n        flex-direction: row;\n        width: 900px;\n        border: 1px solid black;\n        position: relative;\n        left: 50%;\n        transform: translateX(-50%);\n        justify-content: space-b;\n    }\n\n    .partecipante-form {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .mb-3 input {\n        width: 200px;\n    }\n\n    .mb-3 label {\n        margin-left: 8px;\n    }\n\n    .mb-3 {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n    }\n</style>\n\n<script>\nimport {getDoc, doc, addDoc, collection, query, where, getDocs } from 'firebase/firestore'\nimport { db } from '../firebase/firebase'\n\nexport default {\n    name: \"EventoView\",\n    props: ['eventoId'],\n    data() {\n        return {\n            evento: null,\n            nome: \"\",\n            cognome: \"\",\n            data_di_nascita: \"\",\n            presenzaConfermata: false,\n            imgCopertinaURL: \"\",\n        }\n    },\n    async mounted() {\n        try {\n            const docRef = doc(db, 'eventi', this.eventoId)\n            const docSnap = await getDoc(docRef)\n\n            if(docSnap.exists()) {\n                this.evento = docSnap.data()\n                this.imgCopertinaURL = this.evento.imgCopertina;\n            } \n        } catch(error) {\n            console.log(error)\n        }\n    },\n    methods: {\n        async aggiungiPartecipante() {\n            const partecipanteRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\")\n            var partecipanteId = this.nome + \"_\" + this.cognome \n\n            const docRef = await addDoc(partecipanteRef, {\n                nome: this.nome,\n                cognome: this.cognome,\n                data_di_nascita: this.data_di_nascita,\n                presenzaConfermata: this.presenzaConfermata\n            });\n\n            partecipanteId = docRef.id;\n\n            this.nome = \"\";\n            this.cognome = \"\";\n            this.data_di_nascita = \"\";\n\n            this.$router.push({\n                name: \"PartecipanteView\",\n                params: {\n                    eventoId: this.eventoId,\n                    partecipanteId: partecipanteId,\n                }\n            })\n        },\n        async recuperaBiglietto() {\n\n            const partecipantiRef = collection(db, \"eventi\", this.eventoId, \"partecipanti\");\n\n            const q = query(\n                partecipantiRef,\n                where(\"nome\", \"==\", this.nome),\n                where(\"cognome\", \"==\", this.cognome),\n                where(\"data_di_nascita\", \"==\", this.data_di_nascita)\n            );\n\n            const snapshot = await getDocs(q);\n\n            if(!snapshot.empty) {\n                this.partecipanteId = snapshot.id;\n                this.$router.push({\n                name: \"PartecipanteView\",\n                params: {\n                    eventoId: this.eventoId,\n                    partecipanteId: snapshot.docs[0].id,\n                }\n                \n            })\n        }\n    }\n}\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}